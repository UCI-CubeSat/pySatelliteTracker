<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Get Lat Long from Address</title>
    <link rel="stylesheet" type="text/css" href="index.css"/>
{#    Css not working, not sure why#}

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>

    <style>
        .search_box {
            text-align:center;
        }

        h2 {
             text-align:center;
        }

        h3 {
            text-align:center;
        }

        html, body{
            width: 100%;
            height: 100%;
        }
        #map{
            text-align: center;
            margin: auto;
        }

    </style>


</head>
<body>

{#    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">#}
{#    <div id="address search" class="search">#}
{#        <div class="input-container">#}
{#        <input class="address_input" type="text" spellcheck="false" placeholder="Enter the address">#}
{#        <i class="material-icons instant-search__icon">search</i>#}
{#        </div>#}
{#        </div>#}

    <form class="grid" action="/view" method="POST">

{#          <label for="name">Enter the address:</label>#}
        <br>
        <div class = search_box>
        <input type="text" id="address" name="address" placeholder="Enter the address">
        <input class="file_submit" type="Submit" value="find">
        </div>

        {% if address %}
              <h2 style="color: black;" class="let_space">  {{address}} </h2>
            <h3> Latitude: {{lat}} </h3>
            <h3> Longitude: {{long}}</h3>
        {% endif %}

        </form>

    <div id="map" style="width:700px ;height:400px;" class="shadow"></div>
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" crossorigin=""></script>
    <script>
        var map;
        map = L.map('map').setView([{{lat}}, {{long}}], 5);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '<a href="https://www.openstreetmap.org/">OSM</a>',
            maxZoom: 18,
        }).addTo(map);

        var marker = L.marker([{{lat}}, {{long}}]);
        marker.addTo(map);

        map.on('click', onMapClick);
        var popup = L.popup();
        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent(Number(e.latlng.lat).toFixed(6).toString()+ ", " + Number(e.latlng.lng).toFixed(6).toString() )
                .openOn(map);
        }


    </script>


</body>
</html>